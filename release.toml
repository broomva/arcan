# cargo-release configuration
# https://github.com/crate-ci/cargo-release

[workspace]
allow-branch = ["main"]
shared-version = true
consolidate-commits = true
pre-release-commit-message = "chore: release v{{version}}"
tag-message = "v{{version}}"
tag-name = "v{{version}}"
publish = true
push = true
pre-release-hook = ["cargo", "test", "--workspace"]

# Publish order: dependencies first, then dependents
# Tier 1: no internal deps
[[groups]]
name = "tier-1"
members = ["arcan-core"]

# Tier 2: depends on arcan-core
[[groups]]
name = "tier-2"
members = ["arcan-harness", "arcan-store", "arcan-provider"]

# Tier 3: depends on tier-2
[[groups]]
name = "tier-3"
members = ["arcand", "arcan-lago"]

# Tier 4: depends on everything
[[groups]]
name = "tier-4"
members = ["arcan"]
